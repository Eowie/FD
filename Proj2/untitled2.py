# -*- coding: utf-8 -*-
"""
Created on Thu Dec  9 23:20:10 2021

@author: Silvia Mourao
"""
# =============================================================================
# =============================================================================
# # Titulo
# =============================================================================
# =============================================================================
# Programa Fotogrametria - Projeto 2
#
# Silvia Mourao
# FC57541
#
# =============================================================================
# =============================================================================
# # Projeto 2
# =============================================================================
# =============================================================================
# 
# Dispõe-se de duas fotografias aéreas, F6 e F7, que formam um par
# estereoscópico.
# Nessas fotografias foram medidos vários pontos novos e alguns PFs.
# A orientação externa da fotografia F6 é desconhecida.
# A da fotografia F7 é conhecida.
# Ambas as fotografias foram obtidas com a câmara digital Intergraph DMC,
# cujo certificado de calibração se encontra disponível no moodle.
# Estão igualmente disponíveis a orientação externa da foto F7, uma lista
# com as coordenadas foto de PFs e pontos novos medidos numa ou em
# ambas as fotos e uma lista com as coordenadas terreno dos PFs medidas
# no campo.
# =============================================================================
# =============================================================================
# # Import
# =============================================================================
# =============================================================================

import numpy as np
import math
import matplotlib.pyplot as plt

# =============================================================================
# =============================================================================
# # Dados do Problema
# =============================================================================
# =============================================================================

# =============================================================================
# #Orientacao Interna da Camara - igual para as duas fotos
# =============================================================================

c=0.12
x0=0
y0=0

# =============================================================================
# Orientacao Externa da Foto 7
# =============================================================================

X07=-89710.750
Y07=-100990.128
Z07= 1095.365
omega7=0.1208*math.pi/180
fi7=0.2895*math.pi/180
kappa7=15.7612*math.pi/180

# =============================================================================
# #Coordenadas de 6 PF comuns 'as imagens 6 e 7
# =============================================================================
#PF 1000
X1=	-90158.653
Y1=-100565.532
Z1= 93.799
#PF 2000
X2=-89794.832
Y2=-100478.941
Z2=89.069
#PF 3000
X3= -89788.239
Y3= -101679.518
Z3= 81.974
#PF 4000
X4=-89514.366
Y4=-101489.343
Z4=123.038
#PF 5000
X5=-90019.770
Y5=-101048.356
Z5= 93.223
#PF 6000
X6=-89696.832
Y6=-101008.761
Z6=95.277


# =============================================================================
# #Coordenadas dos PFs na foto 6
# =============================================================================
#PF 1000
x1_6=-1.026
y1_6=68.67
#PF 2000
x2_6=44.310
y2_6=65.634
#PF 3000
x3_6=2.526
y3_6=-70.734
#PF 4000
x4_6=41.166
y4_6=-61.722
#PF 5000
x5_6=-1.962
y5_6=7.386
#PF 6000
x6_6=36.534
y6_6=0.642

# =============================================================================
# =============================================================================
# # Parte 1 - Calculo da Orientacao Externa da Foto 6
# =============================================================================
# =============================================================================

# Valores iniciais estimados para a orientação externa da foto 6
# X0,Y0 obtidos atraves da interseccao dos cantos da foto 6 no Google Earth
# De forma a encontrar uma aproximacao para o ponto central
X06=-89961.09
Y06=-101114.59
Z06=8000*c
omega6=0
fi6=0
kappa6=21.94*math.pi/180
s=0
k=0





X1=	-90158.653
Y1=-100565.532
Z1= 93.799

X2=-89794.832
Y2=-100478.941
Z2=89.069

X3= -89788.239
Y3= -101679.518
Z3= 81.974

X4=-89514.366
Y4=-101489.343
Z4=123.038

X5=-90019.770
Y5=-101048.356
Z5= 93.223

X6=-89696.832
Y6=-101008.761
Z6=95.277